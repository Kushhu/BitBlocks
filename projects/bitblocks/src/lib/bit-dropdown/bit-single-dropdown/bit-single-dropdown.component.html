<div class="bit-dropdown-wrapper">

    <div class="bit-textbox bit-selected" tabindex="0" [style.minHeight]="'calc( 13px + 1.5rem * '+ minHeight() + ')' "
        [class.bit-input-valid]="valid === true" [class.bit-input-invalid]="valid === false" (click)="openDrop()"
        (focus)="openDrop()">

        @if (isLoading()) { <span class="bit-dropdown-placeholder"> Loading... </span> }

        @else if (valid === false && value !== null) {   
            <span class="bit-dropdown-placeholder"> Invalid Option : {{ value }} </span> 
        }
       
        @else if (placeholder() && !selectedOption) {  
            <span class="bit-dropdown-placeholder"> {{ placeholder() }} </span> 
        }
       
        @else {
            <div [innerHTML]="selectedOption?.nativeElement?.innerHTML | safe: 'html'"> </div>
        }

    </div>

    <div class="bit-dropdown-icon">
        @if (selectedOption && isOpen) {
            <img class="bit-option-deselect" title="Remove Selection" src="assets/cross-svgrepo-com.svg" 
                        (click)="select(null);" alt="remove-selection-icon">
        } 
        <img src="assets/arrow-down-svgrepo-com.svg" (click)="openDrop()" [hidden]="selectedOption && isOpen" alt="arrow-icon">
    </div>

    @if (isOpen) {
    <div class="bit-option-list">
        <input #searchEle type="text" [placeholder]="searchPlaceholder()" class="bit-textbox" autocomplete="off"
            [(ngModel)]="search" (input)="onInput(searchEle)" 
            (keydown.tab)="closeDrop()" 
            [hidden]="!isSearchable() || !isOpen">

        @if (noSearchAvailable) { <p class="bit-empty-option"> ðŸ˜’ No Matches </p> }

        @if (isLoading()) { <p class="bit-empty-option"> Loading... </p> }

        <ng-content select="bit-option, bit-checked-option"></ng-content>

    </div>
    }
</div>